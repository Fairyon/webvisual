<dom-module id="number-input">
  <template>
    <paper-input label="{{label}}" auto-validate maxlength="{{maxLength}}" pattern="[0-9]*" error-message="nur Zahlen" value="{{input}}"><paper-input-container id="" attr-for-value="input">
      <input is="iron-input"><span>Input label</span>
    </paper-input-container></paper-input>
  </template>
  <script>
    Polymer({
      is: 'number-input',

      properties: {
        input: {
          type: Number,
        },
        value: {
          type: Number,
          notify: true
        },
        maxValue: {
          type: Number,
          value: 5000,
          notify: true
        },
        minValue: {
          type: Number,
          value: 1,
          notify: true
        },
        maxLength: {
          type: String,
          computed: "maxLengthChanged(maxValue)"
        },
        label: {
          type: String,
          value: "",
          notify: true
        },
        default: {
          value: 10,
          notify: true
        }
      },

      listeners: {
        'keydown': 'inputChanged'
      },

      ready: function(){
        this.input = this.value = this.default;
      },

      inputChanged: function(event){
        if (event.keyCode == 13){
          newValue = parseInt(this.input);
          if (newValue != NaN && newValue <= this.maxValue && newValue >= this.minValue){
            this.value = newValue;
          }
          this.input = this.value;
        }
      },

      maxLengthChanged: function(max){
        var str = max.toString();
        return str.length;
      }
    });
  </script>

</dom-module>

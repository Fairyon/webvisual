<script>
  PageBehavior = {
    properties: {
      selectedElement: {
        type: Object,
        value: function() { return {}; },
        notify: true
      },
      selectedGroup: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      ids: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      labels: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      groupingKeys: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      groups: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      preferedGroupingKeys: {
        type: Array,
        value: function() { return []; },
        notify: true
      },
      selectedLabelId: {
        type: Number,
        value: 0,
        notify: true,
        observer: "_handleSelectedLabelChange"
      },
      groupBy: {
        type: String,
        value: "all",
        notify: true,
        observer: "setSelectedGroup"
      },
      maxTotalLines: {
        type: Number
      },
      interval: {
        type: Number
      }
    },
    _handleSelectedLabelChange: function() {
    },
    groupElements: function(item,group){
      if (group.name == "all")
        return true;
      else if (group.ids && group.ids.indexOf(item.id) != -1)
        return true;
      else
        return false;
    },
    setSelectedElement: function(e) {
    },
    setGroupBy: function(groupBy) {
      if(groupBy && this.groupBy in this.groups[this.selectedLabelId]) {
        this.set("groupBy",groupBy);
        this.set("preferedGroupingKeys.#"+this.selectedLabelId, groupBy);
      }
      else if (this.preferedGroupingKeys && this.preferedGroupingKeys[this.selectedLabelId] && this.preferedGroupingKeys[this.selectedLabelId] in this.groups[this.selectedLabelId])
        this.set("groupBy",this.preferedGroupingKeys[this.selectedLabelId]);
      else
        this.set("groupBy","all");
    },
    setSelectedGroup: function(){
      // TODO: Handle lableid change too
      if(this.groups && this.groupBy && this.groups[this.selectedLabelId]){
        this.set("selectedGroup", this.groups[this.selectedLabelId][this.groupBy]);
        this.linkPaths("selectedGroup", "groups." + this.selectedLabelId + "." + this.groupBy);
      }
    },
    sortGroup: function(first,next){
      if (first.ids.length > next.ids.length)
        return true;
      else
        return false;
    },
    sort: function(next,first){
      if (first > next)
      return -1;
      else return 1;
    }
  };

</script>

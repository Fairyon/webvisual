<script src="../../js/dateFormat/jquery-dateFormat.min.js"></script>
<script>

  ElementBehavior = {

    properties: {
        element: {
          type: Object,
          value: function() { return {}; }
        },
        timeFormat: {
          type: String,
          value: "HH:mm:ss"
        }
    },

    computeIcon: function(change, index) {
      if (change.base && change.base.length != 0){
        var exceeds = this.get('exceeds', change.base[index]);
        if(exceeds == true || exceeds == false)
          return "error-outline";
        else
          return "";
      }
    },

    computeX: function(change, index){
      if (change.base && change.base.length != 0){
        var date = this.get('x', change.base[index]);
        if((date !== undefined) && (date != "")){
          return $.format.toBrowserTimeZone(date,this.timeFormat);
        }
        else
          return " ";
      }
    },

    computeY: function(change, index){
      if (change.base && change.base.length != 0){
        var value = this.get('y', change.base[index]);
        var exceeds = this.get('exceeds', change.base[index]);
        if ((value !== undefined) && (value !== "")) {
          if (this.element.isBoolean){
            if (exceeds==true || exceeds==false)
              return "✗";
            else
              return "✓";
          }
          else
            return value;
        }
        else
          return " ";
      }
    },
    computeStyle: function(change, index){
      if (change.base && change.base.length != 0){
        var exceeds = this.get('exceeds', change.base[index]);
        if(exceeds == true)
          return "background: rgb(255, 21, 41); color: #f1f1f1;";
        else if(exceeds == false)
          return "background: rgb(255, 20, 110); color: #f1f1f1;";
        else if(exceeds == null)
          return "background: rgb(0, 202, 53); color: #f1f1f1;";
        else if(exceeds === undefined)
          return "background: rgba(236, 249, 97); color: #1f1f1f;";
      }
    },

    computeLastExceedsX: function(){
      var date = this.element.lastExceeds.x;
      if(date !== undefined)
        return $.format.toBrowserTimeZone(date,this.timeFormat);
    },

    computeLastExceedsY: function(){
      var value = this.element.lastExceeds.y;
      var exceeds = this.element.lastExceeds.exceeds;
      if (value !== undefined) {
        if (this.element.isBoolean){
          if (exceeds==true || exceeds==false)
            return "✗";
          else
            return "✓";
        }
        else
          return value;
      }
    },

    computeLastExceedsStyle: function(){
      var exceeds = this.element.lastExceeds.exceeds;
      if(exceeds == true)
        return "background: rgb(255, 21, 41); color: #f1f1f1;";
      else if(exceeds == false)
        return "background: rgb(255, 20, 110); color: #f1f1f1;";
      else if(exceeds == null)
        return "background: rgb(0, 202, 53); color: #f1f1f1;";
      else if(exceeds === undefined)
        return "background: rgba(236, 249, 97); color: #1f1f1f;";
    }

  };

</script>

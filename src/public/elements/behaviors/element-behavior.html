<script>

  ElementBehavior = {

    properties: {
        element: {
          type: Object,
          value: function() { return {"values":[]}; },
          notify: true
        },
        timeFormat: {
          type: String,
          value: "HH:mm:ss"
        }
    },

    firstX: function(change) {
      if (change.base && change.base.length != 0){
        var date = this.get('x', change.base[0]);
        return this.computeX(date);
      }
      else
        return undefined
    },

    firstY: function(change) {
      if (change.base && change.base.length != 0){
        var value = this.get('y', change.base[0]);
        var exceeds = this.get('exceeds', change.base[0]);
        return this.computeY(value, exceeds)
      }
      else
        return undefined;
    },

    firstStyle: function(change) {
      if (change.base && change.base.length != 0){
        var exceeds = this.get('exceeds', change.base[0]);
        return this.computeStyle(exceeds);
      }
      else
        return undefined;
    },

    firstIcon: function(change) {
      if (change.base && change.base.length != 0){
        var exceeds = this.get('exceeds', change.base[0]);
        if(exceeds == true || exceeds == false)
          return "error-outline";
        else
          return "";
      }
      else
        return undefined;
    },

    computeX: function(date){
      if(date)
        return $.format.toBrowserTimeZone(date,this.timeFormat);
    },

    computeY: function(value,exceeds){
      if(!value && value !=0)
        return undefined;
      else if (this.element.isBoolean){
        if (exceeds==true || exceeds==false)
          return "✗";
        else
          return "✓";
      }
      else {
        return value;
      }
    },

    computeStyle: function(exceeds){
      if(exceeds == true)
        return "background: rgb(255, 21, 41); color: #f1f1f1;";
      else if(exceeds == false)
        return "background: rgb(255, 20, 110); color: #f1f1f1;";
      else
        return "background: rgb(0, 202, 53); color: #f1f1f1;";
    }
  };

</script>

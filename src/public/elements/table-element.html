<dom-module id="table-element">
  <style>
    :host {
      display: inline-block;
    }
    table {
      text-align: center;
      border-collapse: collapse;
      table-layout:fixed;
    }
    caption {
      font-family: Roboto-Condensed-Light-Italic;
      font-size: 0.8em;
    }
    td {
      font-family: Roboto-Condensed;
    }
    td, th {
      font-size: 0.9em;
    }
    th, td, caption {
      padding: 0.5em;
    }
    thead {
      border-top: thin solid #8c8c8c;
      border-bottom: thin solid #8c8c8c;
    }
    iron-icon {
      color: currentColor;
    }
    tr#false{
      background: #c019da;
      color: #f1f1f1;
    }
    tr#true {
      background: #e71506;
      color: #f1f1f1;
    }
  </style>
  <template>
    <table id="content">
      <caption>
        <span>{{element.roomNr}}</span><span>, </span>
        <span>{{element.room}}</span><span>, </span>
        <span>{{element.kind}}</span><span>, </span>
        <span>{{element.method}}</span>
      </caption>
      <thead>
        <th>{{language.x}}</th>
        <th>{{language.y}}</th>
      </thead>
      <tfoot><tr></tr></tfoot>
      <tbody>
        <template is="dom-repeat" id="values" items="{{element.values}}">
          <tr id="{{computeId(item.exceeds)}}">
            <td>{{computeDate(item.x)}}</td>
            <template is="dom-if" if="{{!element.isBoolean}}"><td><span>{{item.y}}</span> <span>{{element.unit}}</span></td></template>
            <template is="dom-if" if="{{element.isBoolean}}"><td><iron-icon icon="{{computeIcon(item.exceeds)}}"></iron-icon></td></template>
          </tr>
        </template>
      <tbody>
    </table>
  </template>

  <script>

    Polymer({
      is: 'table-element',

      properties: {
          element: {
              type: Object,
              value: function() { return {}; }
          },
          language: {
            type: Object,
            value: function() { return {'x':'Datum','y':'Wert'}; }
          },
          timeFormat: {
              type: String,
              value: "HH:mm:ss"
          }
      },
      
      computeIcon: function(exceeds){
        if (exceeds==false || exceeds==true)
          return "error-outline";
        else
          return "done";
      },

      computeId: function(exceeds){
        if (exceeds==false)
          return "false";
        else if (exceeds==true)
          return "true";
        else
          return "done";
      },

      computeDate: function(date){
        return $.format.toBrowserTimeZone(date,this.timeFormat);
      },

      scrollHandler: function() {
      }

    });
  </script>

</dom-module>

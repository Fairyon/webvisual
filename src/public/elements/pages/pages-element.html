<link rel="import" href="../../import-behaviours.html"/>

<dom-module id="pages-element">
  <style></style>
  <template>
    <link href="../../css/page.css" type="text/css" rel="stylesheet"/>

    <data-socket-repeater id="datasocket"
      data="{{data}}"
      max-total-lines="{{maxLines}}"
      interval="{{interval}}"
      groups="{{groups}}"
      on-dataloaded="_onLoaded">
    </data-socket-repeater>

    <neon-animated-pages id="pages" selected="0" animate-initial-selection>

      <loading-page id="loading"></loading-page>

      <sign-page id="nothingSelected" class="element-page" data="{{data}}" groups="{{groups}}"
       selected-group="{{selectedGroup}}" on-selectevent="_onSelected"
       selected-element="{{selectedElement}}"></sign-page>

      <selected-element-sign-page id="firstSelected" class="element-page" data="{{data}}" groups="{{groups}}"
       selected-group="{{selectedGroup}}"
       on-deselectevent="_onDeselected"
       selected-element="{{selectedElement}}"></selected-element-sign-page>

    </neon-animated-pages>
  </template>

  <script>

    Polymer({
      is: 'pages-element',

      behaviors: [DataBehavior, PageBehavior],

      _onSelected: function(event) {
        this.$.pages.selected = 2;
        this.$.firstSelected.fire('resize');
      },

      _onDeselected: function(event) {
        this.$.pages.selected = 1;
      },

      _onLoaded: function() {
        var self = this;
        this.setSelectedGroup();
        setTimeout(function() {
          // this is a bug in webanimations and and animations with intervall
          self.$.loading.$.logo.cancelAnimation();
          self.$.pages.selected = 1;
        },5000);
      }

    });

  </script>

</dom-module>

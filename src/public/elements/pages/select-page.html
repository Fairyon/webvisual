<dom-module id="select-page">
  <style>
    :host {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      @apply(--bright-theme-in-dark-context);
    }
    :host[dark] {
      @apply(--dark-theme-in-dark-context);
    }
    section#background {
      @apply(--primary-color-background);
    }
    section#background[dark] {
      @apply(--dark-color-background);
    }
    section#mainContent {
      box-sizing: border-box;
      padding: 1.5em;
    }
    section.title {
      font-size: 2em;
      margin: 0.67em 0em;
      text-align: center;
    }
    section#select {
      font-family: Fira Sans Light;
      font-size: 1em;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: currentColor;
    }
    iron-selector#labelSelector {
      color: currentColor;
    }

    iron-selector#labelSelector ::content paper-radio-button  {
      font-size: 1em;
      padding: 0em;
      padding-top: 1.5em;
      float: left;
      clear: both;
    }
    span {
      font-size: 1.2em;
      padding: 1em 1em 0.75em 1em;
    }
    paper-button#submitButton {
      margin-left: auto;
      margin-top: 3em;
      border-style: solid;
      border-width: thin;
    }
    paper-button#submitButton iron-icon {
      margin: 0em 0.75em 0em 0em;
      z-index: 10;
    }

  </style>

  <template>

    <section id="background"></section>
    <section id="mainContent">
      <section class="title">Auswahl des Messraums</section>
      <section id="select">
        <span>verf√ºgbar sind:</span>
        <iron-selector id="labelSelector" selected-values="[[selectedLabels]]" on-iron-select="_disableButton" on-iron-deselect="_disableButton" multi attr-for-selected="label">
          <content></content>
        </iron-selector>
        <paper-button id="submitButton" disabled raised="[[notSelected]]" on-click="_onSubmit"><iron-icon id="logo" icon="juelich:logo"></iron-icon>Verbinden</paper-button>
      </section>
    </section>

    <cookie-element id="labelsCookie" name="selected-label" value="{{selectedLabels}}"></cookie-element>
  </template>

  <script>

  Polymer({
      is: 'select-page',

      behaviors: [Polymer.NeonSharedElementAnimatableBehavior, Polymer.NeonAnimationRunnerBehavior],

      properties: {
        selectedLabels: {
          type: Array,
          value: function() { return [];},
          notify: true
        },
        sharedElements: {
          type: Object,
          value: function() {
            return {
              'herologo1': this.$.logo
            }
          }
        },
        animationConfig: {
          value: function() {
            return {
              'entry': [
                {
                  name: 'fade-in-animation',
                  node: this.$.background,
                  timing: {
                    duration: 1500,
                    delay: 0,
                    easing: 'ease'
                  }
                },
                {
                  name: 'fade-in-animation',
                  node: this.$.mainContent,
                  timing: {
                    duration: 500,
                    delay: 0,
                    easing: 'ease'
                  }
                }
              ],
              'exit': [
                {
                  name: 'hero-animation',
                  id: 'herologo1',
                  fromPage: this
                }
              ]
            }
          }
        }
      },

      _disableButton: function() {
        if (this.selectedLabels.length === 0)
          this.$.submitButton.setAttribute('disabled', true);
        else
          this.$.submitButton.removeAttribute('disabled');
      },

      _onSubmit: function() {
        this.$.labelsCookie.save();
        this.fire("labels-set", this.selectedLabels);
      }
    });
  </script>

</dom-module>

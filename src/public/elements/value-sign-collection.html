<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/core-layout-grid/core-layout-grid.html">
<link rel="import" href="value-sign.html">
<link rel="import" href="post-card.html">

<polymer-element name="value-sign-collection">
  <template>

    <style>
      :host {
        position: relative;
        color: #1d1d1d;
        overlay: hidden;
        z-index: 0;
        outline: none;
        font-family: 'Roboto-Regular';
        height: 100vh;
      }

      post-card {
      }

      post-card /deep/ paper-item#head {
        font-size: 1.5em;
      }

      post-card /deep/ div#cardContent {
      }

      value-sign {
        height: 7.4em;
      }

    </style>


    <div id="main">


    </div>

  </template>


  <script>

    Polymer('value-sign-collection', {
        ready: function() {
        },

        publish: {
          group: "room",
          receive: [],
          data: [],
        },

        receiveChanged: function() {
          var htmlcode = "";
          this.data = _.groupBy(this.receive,this.group);
          for (item in this.data) {
            htmlcode += "<post-card headline='" + item + "' top>";
            for (content in this.data[item]) {
              htmlcode += "<value-sign shadow values='" + JSON.stringify(this.data[item][content]) + "'></value-sign>"
            }
            htmlcode += "</post-card>";
          }
          this.injectBoundHTML(htmlcode,this.$.main);
        },

        dataChanged: function() {
        },

        groupChanged: function() {
          this.receiveChanged();
        }
    });

  </script>
</polymer-element>

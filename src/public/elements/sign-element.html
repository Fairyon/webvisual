<link rel="import" href="../components/paper-ripple/paper-ripple.html">
<dom-module id="sign-element">
  <style>
    :host {
      position: relative;
      color: #f1f1f1;;
      border-radius: 2px 2px 0px 0px;
      overlay: hidden;
      display: flex;
      outline: none;
      cursor: pointer;
      font-family: 'Light';
      font-style: normal;
      user-select: none;
      background: transparent;
      font-size: 1em;
      line-height: 1;
      box-shadow: inherit;
    }
    #mainContent {
      box-shadow: inherit;
      position: relative;
      display: flex;
      flex-direction: column;
      border-radius: inherit;
      min-height: 5em;
      width: 100%;
      min-width: 7em;
    }
    #mainContent[dark]{
      color: #d3d3d3;
    }
    .actualValueSection {
      display: flex;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(230, 230, 230, 0.2), rgba(255, 255, 255, 0));
      padding: 1em 1em 0.25em 1em;
      align-items: center;
      -ms-flex: 1;
      -webkit-flex: 1;
      flex: 1;
      flex-direction: row;
      justify-content: center;
    }
    .valueSection {
      font-size: 1.75em;
      font-style: normal;
      font-weight: 300;
    }
    .unitSection {
      padding-left: 0.3em;
      font-size: 0.8em;
    }
    .dateSection {
      font-family: Thin;
      font-size: 0.6em;
      color: #5a5a5a;
    }
    .lowerSection {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: bottom;
      padding: 0.25em 0.75em 0.5em 0.75em;
      line-height: 1em;
    }
    .exceedsDateSection {
      font-family: Light;
      font-size: 0.75em;
    }
    .exceedsValueSection {
      padding-left: 0.75em;
      font-size: 0.8em;
    }
    iron-icon{
      --iron-icon-height: 1.75em;
      --iron-icon-width: 1.75em;
      color: currentColor;
      animation-name: exceed-animation;
      animation-duration: 2s;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
    }
    @keyframes exceed-animation {
        0%   {transform: scale(1);}
        33%  {transform: scale(1.10);}
        100% {transform: scale(1);}
    }
    #ripple {
      color: #1d1d1d;
    }
  </style>
  <template>
    <section id="mainContent" style$="{{computeStyle(element.values.*,0)}}" dark$="[[dark]]">
      <paper-ripple id="ripple" recenters opacity-decay-velocity="1.2"></paper-ripple>

      <section class="actualValueSection">
        <template is="dom-if" if="{{!element.isBoolean}}" restamp>
          <span class="valueSection">{{computeY(element.values.*,0)}}</span><span class="unitSection">{{element.unit}}</span>
        </template>
        <template is="dom-if" if="{{element.isBoolean}}" restamp>
          <iron-icon icon={{computeIcon(element.values.*,0)}}></iron-icon>
        </template>
      </section>

      <section class="lowerSection">
        <template is="dom-if" if="{{showExceeds}}" restamp>
          <template is="dom-if" if="{{element.lastExceeds}}" restamp>
            <span class="exceedsDateSection">{{computeLastExceedsX()}}</span><span class="exceedsValueSection">{{computeLastExceedsY()}}<span> </span><span>{{element.unit}}</span></span>
          </template>
          <template is="dom-if" if="{{!element.lastExceeds}}" restamp>
            <span class="dateSection">{{computeX(element.values.*,0)}}</span>
          </template>
        </template>
        <template is="dom-if" if="{{!showExceeds}}" restamp>
          <span class="dateSection">{{computeX(element.values.*,0)}}</span>
        </template>
      </section>
    </section>
  </template>

  <script>

    SignElement = Polymer({
      is: 'sign-element',

      behaviors: [ElementBehavior],

      created: function(){
        this.exceedsStyle = {
          true:  "background: rgb(255, 21, 41); color: #f1f1f1;",
          false: "background: rgb(255, 20, 110); color: #f1f1f1;",
          none:  "background: rgb(0, 202, 53); color: #f1f1f1;",
          undef: "background: rgb(236, 249, 97); color: #1f1f1f;"
        };
      },

      properties: {
          showExceeds: {
            type: Boolean,
            value: true,
            notify: true
          },
          dark: {
            type: Boolean,
            value: false,
            reflectToAttribute: true,
            notify: true
          }
      }

    });
  </script>

</dom-module>

<link rel="import" href="../components/paper-styles/paper-styles-classes.html">
<link rel="import" href="../components/polymer/polymer.html">

<dom-module id="main-toolbar">
  <style is="costum-style">
    :host {
      display: block;
      position: relative;
      box-sizing: border-box;
      -moz-box-sizing: border-box;
      font-family: Roboto;
      font-weight: normal;
      cursor: pointer;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
      -webkit-tap-highlight-color:rgba(0,0,0,0);
      transition: height 0.18s ease-in;
      margin: 0em;
      padding: 0em;
      max-height: 35vh;
      height: 64px;
    }
    #mainContent {
      margin: 0em;
      padding: 0em;
      background: #005B82;
      color: #f1f1f1;
    }

    #mainContent.dark {
      background: #345475;
      color: #669DB4;
    }
    #header {
      height: 44px;
      width: calc(100% - 16px);
      padding: 10px 8px;
      display: flex;
      flex-direction: row;
      align-items: center;
    }
    #lower {
      margin: 0.25em 0em;
      width: 100%;
    }

    #header ::content logo-element {
      margin-left: 8px;
      height: 100%;
    }

    #header ::content paper-icon-button {
      padding: 10px;
      margin: 0px 8px;
    }

  </style>
  <template>

    <section id="mainContent" on-track="resizeToolbar">
      <section id="header">
        <content select=".header"></content>
      </section>
      <section id="lower">
        <content select=".bottom"></content>
      </section>
    </section>

  </template>

  <script>

  Polymer({
    is: 'main-toolbar',

    hostAttributes: {
      'role': 'toolbar'
    },

    properties: {
    },

    resizeToolbar: function(e){
      element = e.currentTarget;

        if (e.detail.state == "start"){
          startY = e.detail.y;
          startHeight = parseInt(element.style.height) || element.offsetHeight;
          maxHeight = 19*parseInt(window.innerHeight)/50; // golden-ratio
        }
        if (e.detail.state == "track"){
          if (startY > startHeight-8 && e.detail.y > (startHeight + e.detail.dy)-8){
            element.style.height = (startHeight + e.detail.dy + 3*e.detail.ddy) + 'px';
            element.style.cursor = "n-resize";
            // element.className = "";
          }
        }
        if (e.detail.state == "end" && !(e.detail.dy == 0)){
          elementHeight = parseInt(element.style.height);
          element.style.cursor = "pointer";
          // element.className = "has-shadow";

          if (elementHeight < maxHeight)
            element.style.height = Math.round(elementHeight/40)*40;
          else {
            element.style.height = Math.round(maxHeight/40)*40;;
          }
        }
    }

  });
  </script>
</dom-module>
